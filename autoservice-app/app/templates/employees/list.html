{% extends "base.html" %}

{% block title %}–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h1 style="margin: 0;">üë• –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h1>
    <div style="display: flex; gap: 10px;">
        <form method="GET" action="{{ url_for('employees.search_employees') }}" style="display: flex; gap: 10px;">
            <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤..." 
                   style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
            <button type="submit" 
                    style="padding: 8px 16px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">
                üîç –ü–æ–∏—Å–∫
            </button>
        </form>
        <a href="{{ url_for('employees.add_employee') }}" class="btn" style="background: #27ae60;">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
        </a>
    </div>
</div>

{% if search_query %}
<div style="margin-bottom: 20px; padding: 15px; background: #e8f4fc; border-radius: 6px;">
    <p style="margin: 0;">
        üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É: <strong>"{{ search_query }}"</strong>
        <a href="{{ url_for('employees.list_employees') }}" style="margin-left: 15px; color: #3498db;">
            ‚úñ –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫
        </a>
    </p>
</div>
{% endif %}

<div style="margin-bottom: 20px;">
    <p style="color: #666;">
        –í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: {{ count }}
        {% if employeeid %}
            | –í–∞—à ID: {{ employeeid }}
        {% endif %}
    </p>
</div>

{% if rows %}
    <div style="background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; min-width: 800px;">
                <thead style="background: #2c3e50; color: white;">
                    <tr>
                        {% for col in cols %}
                        <th style="padding: 15px; text-align: left; white-space: nowrap;">{{ col }}</th>
                        {% endfor %}
                        <th style="padding: 15px; text-align: left;">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in rows %}
                    <tr style="border-bottom: 1px solid #eee; {% if row[0] == employeeid %}background: #f8f9fa;{% endif %}">
                        {% for value in row %}
                        <td style="padding: 15px; {% if loop.index == 1 %}font-weight: bold; color: #2c3e50;{% endif %}">
                            {% if loop.index == 7 and value is number %}
                                {{ "{:,.2f} ‚ÇΩ".format(value).replace(",", " ") }}
                            {% elif value is none %}
                                <span style="color: #999;">‚Äî</span>
                            {% else %}
                                {{ value }}
                            {% endif %}
                        </td>
                        {% endfor %}
                        <td style="padding: 15px;">
                            <div style="display: flex; gap: 8px;">
                                <a href="{{ url_for('employees.view_employee', employee_id=row[0]) }}" 
                                   style="padding: 5px 10px; background: #3498db; color: white; border-radius: 4px; text-decoration: none; font-size: 12px;">
                                    üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä
                                </a>
                                <a href="{{ url_for('documents.list_documents') }}?employee={{ row[0] }}" 
                                   style="padding: 5px 10px; background: #9b59b6; color: white; border-radius: 4px; text-decoration: none; font-size: 12px;">
                                    üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã
                                </a>
                                {% if row[0] == employeeid %}
                                <span style="padding: 5px 10px; background: #f39c12; color: white; border-radius: 4px; font-size: 12px;">
                                    üë§ –í—ã
                                </span>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% else %}
    <div style="text-align: center; padding: 60px 20px; background: #f8f9fa; border-radius: 8px;">
        <div style="font-size: 60px; margin-bottom: 20px;">üë•</div>
        <h3 style="color: #6c757d; margin-bottom: 15px;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p style="color: #999; margin-bottom: 30px;">
            {% if search_query %}
                –ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
            {% else %}
                –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
            {% endif %}
        </p>
        {% if search_query %}
        <a href="{{ url_for('employees.list_employees') }}" class="btn" style="padding: 12px 30px;">
            ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
        </a>
        {% else %}
        <a href="{{ url_for('employees.add_employee') }}" class="btn" style="padding: 12px 30px;">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
        </a>
        {% endif %}
    </div>
{% endif %}

<div style="margin-top: 40px;">
    <h3>üìä API –¥–æ—Å—Ç—É–ø</h3>
    <p>–î–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:</p>
    <div style="background: #2c3e50; color: white; padding: 15px; border-radius: 6px; font-family: monospace;">
        GET /employees/api/list
    </div>
    <a href="/employees/api/list" target="_blank" style="display: inline-block; margin-top: 10px; color: #3498db;">
        üîó –û—Ç–∫—Ä—ã—Ç—å API –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
    </a>
</div>

<style>
    @media (max-width: 768px) {
        table {
            display: block;
        }
        th, td {
            padding: 10px !important;
            font-size: 14px;
        }
    }
</style>
{% endblock %}