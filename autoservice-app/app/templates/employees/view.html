{% extends "base.html" %}

{% block title %}{{ employee.fullname }}{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 30px;">
    <div>
        <h1 style="margin: 0 0 10px 0;">{{ employee.fullname }}</h1>
        <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
            <span style="padding: 6px 15px; background: #3498db; color: white; border-radius: 20px; font-size: 14px; font-weight: bold;">
                {{ employee.position }}
            </span>
            {% if employee.department_name %}
            <span style="color: #666; font-size: 14px;">
                üè¢ {{ employee.department_name }}
            </span>
            {% endif %}
            {% if employee.role_name %}
            <span style="color: #666; font-size: 14px;">
                üéØ {{ employee.role_name }}
            </span>
            {% endif %}
        </div>
    </div>
    <div style="display: flex; gap: 10px;">
        <a href="{{ url_for('employees.list_employees') }}" 
           class="btn" style="background: #95a5a6;">
            ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
        </a>
    </div>
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
    <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
        <h3 style="margin-top: 0; color: #2c3e50; padding-bottom: 15px; border-bottom: 2px solid #f8f9fa;">
            üìã –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        </h3>
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px 0; color: #666;">ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:</td>
                <td style="padding: 8px 0; font-weight: bold;">{{ employee.employeeid }}</td>
            </tr>
            <tr>
                <td style="padding: 8px 0; color: #666;">–§–ò–û:</td>
                <td style="padding: 8px 0; font-weight: bold;">{{ employee.fullname }}</td>
            </tr>
            <tr>
                <td style="padding: 8px 0; color: #666;">–î–æ–ª–∂–Ω–æ—Å—Ç—å:</td>
                <td style="padding: 8px 0; font-weight: bold;">{{ employee.position }}</td>
            </tr>
            <tr>
                <td style="padding: 8px 0; color: #666;">–î–∞—Ç–∞ –ø—Ä–∏–µ–º–∞:</td>
                <td style="padding: 8px 0; font-weight: bold;">{{ employee.hiredate }}</td>
            </tr>
            {% if employee.salary %}
            <tr>
                <td style="padding: 8px 0; color: #666;">–ó–∞—Ä–ø–ª–∞—Ç–∞:</td>
                <td style="padding: 8px 0; font-weight: bold; color: #27ae60;">
                    {{ "{:,.2f} ‚ÇΩ".format(employee.salary).replace(",", " ") }}
                </td>
            </tr>
            {% endif %}
        </table>
    </div>
    
    <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
        <h3 style="margin-top: 0; color: #2c3e50; padding-bottom: 15px; border-bottom: 2px solid #f8f9fa;">
            üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        </h3>
        <table style="width: 100%;">
            {% if employee.department_id %}
            <tr>
                <td style="padding: 8px 0; color: #666;">ID –æ—Ç–¥–µ–ª–∞:</td>
                <td style="padding: 8px 0; font-weight: bold;">{{ employee.department_id }}</td>
            </tr>
            {% endif %}
            {% if employee.department_name %}
            <tr>
                <td style="padding: 8px 0; color: #666;">–û—Ç–¥–µ–ª:</td>
                <td style="padding: 8px 0; font-weight: bold;">{{ employee.department_name }}</td>
            </tr>
            {% endif %}
            {% if employee.phone %}
            <tr>
                <td style="padding: 8px 0; color: #666;">–¢–µ–ª–µ—Ñ–æ–Ω:</td>
                <td style="padding: 8px 0; font-weight: bold;">
                    {% if employee.phone_encrypted %}
                    <span style="color: #f39c12;">üîí –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ</span>
                    {% else %}
                    {{ employee.phone }}
                    {% endif %}
                </td>
            </tr>
            {% endif %}
            {% if employee.email %}
            <tr>
                <td style="padding: 8px 0; color: #666;">Email:</td>
                <td style="padding: 8px 0; font-weight: bold;">
                    {% if employee.email_encrypted %}
                    <span style="color: #f39c12;">üîí –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ</span>
                    {% else %}
                    {{ employee.email }}
                    {% endif %}
                </td>
            </tr>
            {% endif %}
        </table>
    </div>
</div>

<div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
    <h3 style="margin-top: 0; color: #2c3e50; padding-bottom: 15px; border-bottom: 2px solid #f8f9fa;">
        üìä –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    </h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
        <div>
            <h4 style="color: #7f8c8d; margin-bottom: 10px;">–î–æ–∫—É–º–µ–Ω—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h4>
            <a href="{{ url_for('documents.list_documents') }}?creator={{ employee.employeeid }}" 
               class="btn" style="background: #9b59b6; display: inline-block;">
                üìÑ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
            </a>
        </div>
        <div>
            <h4 style="color: #7f8c8d; margin-bottom: 10px;">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h4>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <a href="mailto:{{ employee.email }}" 
                   class="btn" style="background: #e74c3c; padding: 8px 15px;">
                    ‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å email
                </a>
                {% if employee.phone and not employee.phone_encrypted %}
                <a href="tel:{{ employee.phone }}" 
                   class="btn" style="background: #27ae60; padding: 8px 15px;">
                    üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
    <h4 style="margin-top: 0; color: #2c3e50;">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∞–Ω–Ω—ã—Ö</h4>
    <p style="margin: 0; color: #666; font-size: 14px;">
        –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–∑ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è <strong>v_employees</strong> –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ç–∞–±–ª–∏—Ü—ã <strong>employees</strong>.
        –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ç–µ–ª–µ—Ñ–æ–Ω—ã, emails) –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
    </p>
</div>
{% endblock %}